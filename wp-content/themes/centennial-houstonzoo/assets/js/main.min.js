$(document).foundation();var mainHandler={$menuOpenContainer:$menuOpenContainer=$(".menu-open-container"),$html:$html=$("html"),$body:$body=$("body"),$menuItem:$menuItem=$(".menu-item"),$contentRight:$contentRight=$(".content-right"),$yourStoryContainer:$yourStoryContainer=$(".your-story-container"),$defaultContent:$defaultContent=$(".default-content"),$leftSection:$leftSection=$(".left-section"),$buttonBack:$buttonBack=$(".button-back"),$buttonInsideMenu:$buttonInsideMenu=$(".button-inside-menu"),openMenu:openMenu=function(e){var t=this;this.$menuOpenContainer.toggleClass("active"),this.$menuOpenContainer.is(".active")?(this.$html.addClass("disable-scroll"),this.getScrollBarWidth(),jQuery("body, header").css({"padding-right":this.scrollBarWidth+"px"})):setTimeout(function(){t.$html.removeClass("disable-scroll"),jQuery("body, header").css({"padding-right":0})},250),this.$yourStoryContainer.removeClass("active"),this.$defaultContent.addClass("active"),this.$menuItem.each(function(){$(this).removeClass("active"),$(this).hasClass("current")?$(this).addClass("active"):$(this).addClass("default")}),this.$leftSection.removeClass("hide-for-small-only"),this.$buttonBack.addClass("hide"),this.$body.toggleClass("modal--is-showing")},scrollBarWidth:17,getScrollBarWidth:function(){var e=$("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),t=$("<div>").css({width:"100%"}).appendTo(e).outerWidth();e.remove(),this.scrollBarWidth=100-t},init:init=function(e){var t=this;this.$menuItem.on("click",function(e){e.stopPropagation();var i=$(this).attr("data-id"),a=$(".menu-item[data-id="+i+"]");t.$menuItem.removeClass("default"),a.addClass("active")}),$('[href="#menu-open"]').on("click",function(e){e.preventDefault(),e.stopPropagation(),t.openMenu()}),$('[href="#share-your-story"]').on("click",function(e){e.preventDefault(),t.$menuOpenContainer.hasClass("active")||t.openMenu(),$('.menu-item[data-id="1"]').trigger("click"),t.$contentRight.removeClass("active"),t.$yourStoryContainer.addClass("active"),t.$leftSection.addClass("hide-for-small-only"),t.$buttonBack.removeClass("hide"),t.$buttonInsideMenu.removeClass("hide")}),$("body").on("click","[href='#btn-reload-story-form']",function(e){e.preventDefault(),e.stopPropagation();var t=window.location.href.replace(/#[^#]*$/,"")+"#share-your-story";window.location.href=t,window.location.reload(),window.location.href=window.location.href.replace(/#[^#]*$/,"")});var i=window.location.hash;i&&"share-your-story"==(i=i.substring(1))&&$('[href="#share-your-story"]').eq(0).trigger("click"),$("[href=#menu-open-back]").on("click",function(e){e.preventDefault(),e.stopPropagation(),t.$menuItem.addClass("active"),t.$leftSection.removeClass("hide-for-small-only"),t.$contentRight.addClass("active"),t.$yourStoryContainer.removeClass("active"),t.$buttonBack.addClass("hide")})}},gfHandler={fieldName:fieldName="input_16",fieldPhone:fieldPhone="input_4",fieldEmail:fieldEmail="input_3",$input:$input=$(".ginput_container").find('input[type=text], input[type=email], input[type=tel], input[type=number], textarea[name="input_6"]'),$fieldHidden:$fieldHidden=$("#field_1_12"),$fieldReview:$fieldReview=[],$htmlContainer:$htmlContainer='<li id="field_review"></li>',$htmlFileUpload:$htmlFileUpload='<li id="field_uploads"></li>',$fieldBeforeDynamic:$fieldBeforeDynamic=$("#field_1_20"),totalsItems:totalsItems=10,yearStart:yearStart=1922,$htmlHasInputedFile:$htmlHasInputedFile=null,$selectIdentifier:$selectIdentifier=$(".ginput_container select"),name:name="",email:email="",phone:phone="",templateUpload:templateUpload=function(){var e="",t="<option>Year</option>";for(let e=(new Date).getFullYear();e>yearStart;e--)t+='<option value="'+e+'">'+e+"</option>";for(let i=0;i<totalsItems;i++)e+='<div class="uploads-item input '+(i>0?"hide":"")+'" data-id="'+i+'"><div class="grid-x grid-margin-x grid-input"><div class="cell small-9 input-field"><input type="file" class="input_file hide" id="input_file_'+i+'" data-id="'+i+'" name="file_upload[]" size="25" accept=".jpg,.png,.giv,.mov" /><label class="label-input" data-id="'+i+'" for="input_file_'+i+'">Upload file</label><span class="clear-img" data-id="'+i+'" ></span></div><div class="cell small-5 input-field-cmb"><select name="input_year[]" id="input_year_'+i+'" data-id="'+i+'" class="medium gfield_select select-year" aria-invalid="false">'+t+'</select></div></div><label class="gfield_label" for="input_caption_'+i+'">Add a caption</label><textarea name="input_caption[]" id="input_caption_'+i+'" data-id="'+i+'"  class="textarea textarea-uploads" tabindex="16" placeholder="200 characters max" aria-invalid="false" rows="10" cols="50"></textarea>'+(i+1==totalsItems?"":'<a href="#show-next-item" class="button-plus green"> <span class="button-label color-white"> Add another photo or video </span></a>')+'<div class="review-container flex-container"><p class="file-label button-label color-light-green" data-id="'+i+'"></p><div class="flex-container"><a href="#actions-button" class="button btn-act editmode" data-id="'+i+'" >EDIT</a><a href="#delete-item" class="button button-close" data-id="'+i+'" ></a></div></div></div>';return e},rearrangeData:rearrangeData=function(e){var t=null,i=e;$("body").find("#field_uploads").children().each(function(){var e=$(this),a=e.data("id");a==i?(e.data("id","999"),e.attr("data-id","999"),$("body").find("[data-id="+i+"]").data("id","999"),$("body").find("[data-id="+i+"]").attr("data-id","999"),e.addClass("hide"),t=e,e.remove()):a>i&&($("body").find("[data-id="+a+"]").data("id",i),$("body").find("[data-id="+a+"]").attr("data-id",i),$("body").find(".item-no[data-id="+i+"]").text(parseInt(i+1)),i++)}),$("body").find("#field_uploads").append(t),$("body").find('[data-id="999"]').data("id",parseInt(self.totalsItems-1)),$("body").find('[data-id="999"]').attr("data-id",parseInt(self.totalsItems-1))},comboStyled:comboStyled=function(e=!1){$("body").find(".ginput_container select, .input-field select, .input-field-cmb select").each(function(){var t=$(this),i=$(this).children("option").length,a=t.attr("name");if(0==e){t.parent().parent().addClass(a),t.addClass("select-hidden"),t.wrap('<div class="select"></div>'),t.after('<div class="select-styled"></div>'),(d=t.next("div.select-styled")).text(t.children("option").eq(0).text());for(var n=$("<ul />",{class:"select-options"}).insertAfter(d),l=0;l<i;l++)t.children("option").eq(l).is(":selected")&&d.text(t.children("option").eq(l).text())}else{var d=t.next("div.select-styled");n=t.find(".select-options")}d.on("click",function(e){e.stopPropagation(),$("div.select-styled.active").not(this).each(function(){$(this).removeClass("active").next("ul.select-options").hide()});for(var a=$(this).closest(".select").find(".select-options").empty(),n=0;n<i;n++)if(""!==t.children("option").eq(n).text()){var l={text:t.children("option").eq(n).text(),rel:t.children("option").eq(n).val(),class:(t.children("option").eq(n).attr("disabled")?"disabled":"")+t.children("option").eq(n).val()};$("<li />",l).appendTo(a)}a.find("li").on("click",function(e){e.stopPropagation(),$(e.target).is(".disabled")||(d.removeClass("active"),t.val($(this).attr("rel")).trigger("change"),a.hide())}),$(this).toggleClass("active").next("ul.select-options").toggle()}),t.on("change",function(){var e=t.val();d.removeClass("selected");for(var a=0;a<i;a++)t.children("option").eq(a).attr("value")==e&&(d.text(t.children("option").eq(a).text()),t.children("option").eq(a).val()&&d.addClass("selected"))}),$(document).on("click",function(){d.removeClass("active"),n.hide()})})},clearItems:clearItems=function(e,t=!1){var i=$('.input_file[data-id="'+e+'"]'),a=$('.file-label[data-id="'+e+'"]'),n=$('.label-input[data-id="'+e+'"]');if(i.val(""),a.val(""),n.text("Select file"),i.parent().removeClass("selected"),0==t){var l=$('.uploads-item[data-id="'+e+'"]'),d=$('.select-year[data-id="'+e+'"]'),o=$('.textarea-uploads[data-id="'+e+'"]');d.prop("selectedIndex",0),$(d.parent().find(".select-styled")).text("Year"),o.val(""),l.removeClass("selected"),l.addClass("input")}},inputHandler:inputHandler=function(e,t,i=!1){var a=parseInt(parseInt(e)+1),n=$('.file-label[data-id="'+e+'"]'),l=$('.label-input[data-id="'+e+'"]'),d=$('.uploads-item[data-id="'+e+'"]'),o=$(".uploads-item[data-id="+a+"]");n.text(".  "+t),n.prepend('<span class="item-no" data-id="'+e+'">'+a+"</span>"),l.text(t),l.parent().addClass("selected"),""===t||d.hasClass("edit")||i&&(d.addClass("selected"),d.removeClass("input"),o.removeClass("hide"),o.addClass("input")),""==t&&(l.text("Select file"),l.parent().removeClass("selected"))},onChangeEvents:onChangeEvents=function(e=!1){var t=this;0==e&&(e=t.$input),e.on("input, keydown, change, keyup",function(e){this.name==t.fieldName||this.id==t.fieldName?t.name=this.value:this.name==t.fieldEmail||this.id==t.fieldEmail?t.email=this.value:this.name!=t.fieldPhone&&this.id!=t.fieldPhone||(t.phone=this.value),console.log(this),console.log(this.value)})},getFilename:getFilename=function(e){var t=$('.input_file[data-id="'+e+'"]');if(t){var i=t.val().split("\\").pop(),a=t[0].files[0],n=0;return void 0!==a&&(n=a.size/Math.pow(1024,2)),""!=i?i+" ("+n.toFixed(2)+" MB)":""}return""},reRender:reRender=function(){var e=this,t=$("body").find("#field_1_12").after($htmlContainer).next(),i="",a="",n=$("body").find('textarea[id="input_1_6"]'),l=n.val(),d=$(".ginput_container").find("input");if(e.onChangeEvents(d),n.on("change, keydown, keyup",function(){var e=$(this).val(),t=e.split(" "),i=e.lastIndexOf(" ");500==t.length&&(e=e.substring(0,i),$(this).val(e))}),e.name){var o=$("body").find('input[id="input_1_13"]').val(),s=$("body").find("input[type='radio'][name='input_22']:checked").val();$("body").find('.gfield_checkbox[id="input_1_5"]').children().each(function(){var e=$(this).find("input:checked").val();e&&(a+=e.replace("_"," ")+",")}),""==a&&""==o&&""==s||(i='<span class="button-label"> ('+a+" "+o+" "+s+")</span>"),t.append('<div class="form-input-text">'+e.name+i+"</div>")}if($text=e.email,""!=e.email&&""!=e.phone?$text+=", "+e.phone:$text+=e.phone,$text&&t.append("<p>"+$text+"</p>"),t.append('<p class="textarea-label zoo-memory"><i>'+l+"</i></p>"),null!=e.$htmlHasInputedFile&&t.after().append(e.$htmlHasInputedFile[0]),null==e.$htmlHasInputedFile){var r=$("body").find("#field_1_20").after($htmlFileUpload).next(),c=e.templateUpload();r.append(c),e.comboStyled()}else{r=$("body").find("#field_uploads");e.comboStyled(!0)}(r.children().each(function(){var t=this.getAttribute("data-id"),i=e.getFilename(t);""!=i&&e.inputHandler(t,i,!0)}),r.find('[href="#show-next-item"]').on("click",function(t){t.preventDefault(),t.stopPropagation();var i=$(this).parents()[0].getAttribute("data-id"),a=e.getFilename(i);""==a?alert("Cannot add new item, fill current item first."):e.inputHandler(i,a,!0)}),r.find(".clear-img").on("click",function(t){var i=this.getAttribute("data-id");$(this).parent().removeClass("selected"),e.clearItems(i,!0),e.inputHandler(i,"")}),r.find('[href="#actions-button"]').on("click",function(t){t.preventDefault();var i=this.getAttribute("data-id"),a=$('.uploads-item[data-id="'+i+'"]');""==e.getFilename(i)?alert("File must be selected."):(a.toggleClass("edit"),a.toggleClass("selected"),a.hasClass("edit")?$(this).text("SAVE"):$(this).text("EDIT"))}),r.find('[href="#delete-item"]').on("click",function(t){t.preventDefault();var i=$(this).data("id");confirm("Are you sure you want to delete this item?")&&(e.clearItems(i),gfHandler.rearrangeData(i))}),r.find(" input.input_file ").on("change",function(){var t=this.getAttribute("data-id"),i=e.getFilename(t);e.inputHandler(t,i)}),r.children().each(function(){var i=this.getAttribute("data-id"),a=$(this).children().children().children()[0],n=$(this).children().children().children()[1];$(a).on("change",function(n){var l=$('<div id="image-prev-'+i+'" class="gf-image-upload-preview"><div class="remove-button" title="Remove image"></div><img/></div>').appendTo(t),d=new FileReader;d.onload=function(e){l.find("img").attr("src",e.target.result)},d.readAsDataURL(a.files[0]),e.$htmlHasInputedFile=r}),$(n).on("change",function(t){e.$htmlHasInputedFile=r})}),null!=e.$htmlHasInputedFile)&&($("body").find("#field_1_20").after(e.$htmlHasInputedFile).next().children().each(function(i){var a=this.getAttribute("data-id"),n=parseInt(parseInt(a)+1),l=$('.input_file[data-id="'+a+'"]'),d=e.getFilename(a);if(d){var o=$('.textarea-uploads[data-id="'+a+'"]').val(),s='<li class="item-review" data-id="'+a+'"><div class="review-container flex-container"><p class="file-label button-label color-light-green" data-id="'+a+'" > <span class="item-no" data-id="'+a+'">'+n+"</span>.  "+d+'</p><div class="flex-container align-self-top"><a href="#review-edit-button" class="button editmode" data-id="'+a+'" >EDIT</a><a href="#delete-item" class="button button-close" data-id="'+a+'" ></a></div></div><div class="image-container flex-container"><img src="" class="img-review" data-id="'+a+'" ><p class="textarea-label" >'+o+"</p></div></li>",r=t.append(s),c=new FileReader;c.onload=function(e){r.find('.img-review[data-id="'+a+'"]').attr("src",e.target.result)},c.readAsDataURL(l[0].files[0])}}),t.find('[href="#review-edit-button"]').on("click",function(e){e.preventDefault(),e.stopPropagation();var t=this.getAttribute("data-id");$("#gform_target_page_number_1").val("3"),$("#gform_1").trigger("submit",[!0]),$($('.btn-act[data-id="'+t+'"]')[0]).click()}),t.find('[href="#delete-item"]').on("click",function(t){t.preventDefault();var i=this.getAttribute("data-id");confirm("Are you sure you want to delete this item?")&&(e.clearItems(i),$('.item-review[data-id="'+i+'"]').remove(),gfHandler.rearrangeData(i))}))},init:init=function(e){var t=this;t.$fieldReview=t.$fieldHidden.after($htmlContainer).next(),t.onChangeEvents(),t.comboStyled(),$(document).on("gform_post_render",function(e,i,a){t.onChangeEvents(),t.reRender()})}};jQuery(document).ready(function(e){var t=document.querySelector("header");new Headroom(t).init(),mainHandler.init(),gfHandler.init(),e(window).on("load, scroll",function(){e(window).scrollTop()>e(window).height()/2?(e("header").addClass("scrolled"),e(".logo-white").addClass("hide"),e(".logo-black").removeClass("hide")):(e("header").removeClass("scrolled"),e(".logo-black").addClass("hide"),e(".logo-white").removeClass("hide"))}),e('iframe[src*="youtube.com"], iframe[src*="vimeo.com"]').each(function(){e(this).parent().addClass("responsive-embed widescreen")}),e(window).on("resize",function(){e(".debugger .column-width").html(e(".debugger .cell").eq(0).width()),e(".debugger .gutter-width").html(2*parseInt(e(".debugger .cell").eq(0).css("margin-left"))),e(".debugger .container-padding").html(2*parseInt(e(".debugger .grid-container").eq(0).css("padding-left")))}).trigger("resize"),e(".debugger").on("click",function(t){e(this).remove()})});
//# sourceMappingURL=main.min.js.map
